[gd_scene load_steps=4 format=2]

[ext_resource path="res://bin/gdexample.gdns" type="Script" id=1]
[ext_resource path="res://TileLights.gd" type="Script" id=2]

[sub_resource type="GDScript" id=2]
script/source = "extends Node2D

onready var grid = $\"../\"

func _ready():
#	return
	var x:PoolVector2Array = [Vector2(72, 14), Vector2(73, 14), Vector2(74, 14), Vector2(75, 14), Vector2(76, 14), Vector2(77, 14), Vector2(78, 14), Vector2(79, 14), Vector2(80, 14), Vector2(81, 14), Vector2(82, 14), Vector2(83, 14), Vector2(84, 14), Vector2(85, 14), Vector2(86, 14), Vector2(87, 14), Vector2(88, 14), Vector2(89, 14), Vector2(90, 14), Vector2(91, 14), Vector2(92, 14), Vector2(65, 15), Vector2(67, 15), Vector2(68, 15), Vector2(69, 15), Vector2(70, 15), Vector2(71, 15), Vector2(72, 15), Vector2(73, 15), Vector2(74, 15), Vector2(75, 15), Vector2(76, 15), Vector2(77, 15), Vector2(78, 15), Vector2(79, 15), Vector2(80, 15), Vector2(81, 15), Vector2(82, 15), Vector2(84, 15), Vector2(63, 16), Vector2(64, 16), Vector2(65, 16), Vector2(66, 16), Vector2(67, 16), Vector2(68, 16), Vector2(69, 16), Vector2(70, 16), Vector2(71, 16), Vector2(72, 16), Vector2(73, 16), Vector2(74, 16), Vector2(75, 16), Vector2(76, 16), Vector2(77, 16), Vector2(78, 16), Vector2(79, 16), Vector2(59, 17), Vector2(62, 17), Vector2(63, 17), Vector2(64, 17), Vector2(65, 17), Vector2(66, 17), Vector2(67, 17), Vector2(68, 17), Vector2(57, 18), Vector2(58, 18), Vector2(59, 18), Vector2(60, 18), Vector2(61, 18), Vector2(62, 18), Vector2(63, 18), Vector2(64, 18), Vector2(65, 18), Vector2(66, 18), Vector2(56, 19), Vector2(57, 19), Vector2(58, 19), Vector2(59, 19), Vector2(60, 19), Vector2(61, 19), Vector2(62, 19), Vector2(63, 19), Vector2(54, 20), Vector2(55, 20), Vector2(56, 20), Vector2(57, 20), Vector2(58, 20), Vector2(59, 20), Vector2(60, 20), Vector2(61, 20), Vector2(54, 21), Vector2(55, 21), Vector2(56, 21), Vector2(57, 21), Vector2(58, 21), Vector2(59, 21), Vector2(60, 21), Vector2(52, 22), Vector2(53, 22), Vector2(54, 22), Vector2(55, 22), Vector2(56, 22), Vector2(57, 22), Vector2(58, 22), Vector2(59, 22), Vector2(51, 23), Vector2(52, 23), Vector2(53, 23), Vector2(54, 23), Vector2(55, 23), Vector2(56, 23), Vector2(49, 24), Vector2(50, 24), Vector2(51, 24), Vector2(52, 24), Vector2(53, 24), Vector2(54, 24), Vector2(55, 24), Vector2(48, 25), Vector2(49, 25), Vector2(50, 25), Vector2(51, 25), Vector2(52, 25), Vector2(53, 25), Vector2(54, 25), Vector2(46, 26), Vector2(47, 26), Vector2(48, 26), Vector2(49, 26), Vector2(50, 26), Vector2(51, 26), Vector2(52, 26), Vector2(53, 26), Vector2(46, 27), Vector2(47, 27), Vector2(48, 27), Vector2(49, 27), Vector2(50, 27), Vector2(51, 27), Vector2(52, 27), Vector2(45, 28), Vector2(46, 28), Vector2(47, 28), Vector2(48, 28), Vector2(49, 28), Vector2(50, 28), Vector2(51, 28), Vector2(44, 29), Vector2(45, 29), Vector2(46, 29), Vector2(47, 29), Vector2(48, 29), Vector2(49, 29), Vector2(50, 29), Vector2(44, 30), Vector2(45, 30), Vector2(46, 30), Vector2(47, 30), Vector2(48, 30), Vector2(49, 30), Vector2(50, 30), Vector2(44, 31), Vector2(45, 31), Vector2(46, 31), Vector2(47, 31), Vector2(48, 31), Vector2(49, 31), Vector2(43, 32), Vector2(44, 32), Vector2(45, 32), Vector2(46, 32), Vector2(47, 32), Vector2(48, 32), Vector2(43, 33), Vector2(44, 33), Vector2(45, 33), Vector2(46, 33), Vector2(47, 33), Vector2(48, 33), Vector2(43, 34), Vector2(44, 34), Vector2(45, 34), Vector2(46, 34), Vector2(47, 34), Vector2(48, 34), Vector2(43, 35), Vector2(44, 35), Vector2(45, 35), Vector2(46, 35), Vector2(47, 35), Vector2(48, 35), Vector2(43, 36), Vector2(44, 36), Vector2(45, 36), Vector2(46, 36), Vector2(47, 36), Vector2(42, 37), Vector2(43, 37), Vector2(44, 37), Vector2(45, 37), Vector2(46, 37), Vector2(47, 37), Vector2(48, 37), Vector2(42, 38), Vector2(43, 38), Vector2(44, 38), Vector2(45, 38), Vector2(46, 38), Vector2(47, 38), Vector2(48, 38), Vector2(44, 39), Vector2(45, 39), Vector2(46, 39), Vector2(47, 39), Vector2(48, 39), Vector2(45, 40), Vector2(46, 40), Vector2(47, 40), Vector2(48, 40), Vector2(49, 40), Vector2(46, 41), Vector2(47, 41), Vector2(48, 41), Vector2(49, 41), Vector2(47, 42), Vector2(48, 42), Vector2(49, 42), Vector2(50, 42), Vector2(47, 43), Vector2(48, 43), Vector2(49, 43), Vector2(50, 43), Vector2(51, 43), Vector2(52, 43), Vector2(53, 43), Vector2(54, 43), Vector2(55, 43), Vector2(56, 43), Vector2(57, 43), Vector2(58, 43), Vector2(59, 43), Vector2(60, 43), Vector2(50, 44), Vector2(51, 44), Vector2(52, 44), Vector2(53, 44), Vector2(54, 44), Vector2(55, 44), Vector2(56, 44), Vector2(57, 44), Vector2(58, 44), Vector2(59, 44), Vector2(60, 44), Vector2(61, 44), Vector2(62, 44), Vector2(63, 44), Vector2(64, 44), Vector2(52, 45), Vector2(53, 45), Vector2(54, 45), Vector2(55, 45), Vector2(56, 45), Vector2(57, 45), Vector2(58, 45), Vector2(59, 45), Vector2(60, 45), Vector2(61, 45), Vector2(62, 45), Vector2(63, 45), Vector2(64, 45), Vector2(65, 45), Vector2(55, 46), Vector2(56, 46), Vector2(57, 46), Vector2(58, 46), Vector2(59, 46), Vector2(60, 46), Vector2(61, 46), Vector2(62, 46), Vector2(63, 46), Vector2(64, 46), Vector2(65, 46), Vector2(66, 46), Vector2(67, 46), Vector2(68, 46), Vector2(69, 46), Vector2(70, 46), Vector2(71, 46), Vector2(72, 46), Vector2(73, 46), Vector2(74, 46), Vector2(75, 46), Vector2(59, 47), Vector2(60, 47), Vector2(61, 47), Vector2(62, 47), Vector2(63, 47), Vector2(64, 47), Vector2(65, 47), Vector2(66, 47), Vector2(67, 47), Vector2(68, 47), Vector2(69, 47), Vector2(70, 47), Vector2(71, 47), Vector2(72, 47), Vector2(73, 47), Vector2(74, 47), Vector2(75, 47), Vector2(76, 47), Vector2(77, 47), Vector2(78, 47), Vector2(79, 47), Vector2(70, 48), Vector2(71, 48), Vector2(72, 48), Vector2(73, 48),]
	for i in x:
		grid.add_obstacle(i)
	
func _process(delta):
#	return
	if Input.is_action_pressed(\"mouse_right\"):
		if not grid.is_obstacle(grid.world_to_map(get_local_mouse_position())):
			grid.add_obstacle(grid.world_to_map(get_local_mouse_position()))
			print(grid.get_obstacles().size())
#
#	if Input.is_action_just_pressed(\"ui_down\"):
#		var file = File.new()
#		file.open(\"res://Obsts.txt\", File.WRITE)
#		var res = \"[\"
#		for i in grid.get_obstacles():
#			res += \"Vector2\" + str(i) + \", \"
#		res += \"]\"
#		file.store_string(res)
#		file.close()
#
	
	grid.clear_obstacles_canvas()
	acl()
	for i in grid.get_obstacles():
		grid.fill_cell(i, Color.blue)
	
func acl():
	grid.add_circle_lighter(grid.world_to_map(get_local_mouse_position()), 40)
"

[node name="Main" type="Node2D"]

[node name="Grid" type="Node2D" parent="."]
script = ExtResource( 2 )
cell_size = 8

[node name="TileMap" type="TileMap" parent="."]
cell_size = Vector2( 8, 8 )
format = 1
script = ExtResource( 1 )

[node name="Control" type="Node2D" parent="TileMap"]
script = SubResource( 2 )
